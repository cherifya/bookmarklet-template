<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <style>
    * {
      font-family: sans-serif;
    }

    body {
      width: 600px;
      margin: auto;
    }

    body h1 {
      text-decoration: underline;
    }
  </style>

  <script class="load-script-function" type="text">
    function(url) {
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = url;
      script.async = true;
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(script, s);
    }
  </script>

  <script>

    // TODO: allow links to multiple bookmarklets on the same page

    ///////////////////////////////////////////////////////////////////
    // TODO: after cloning this repo, change some/all of these values
    //   Also, you may want to update the instructions below.
    ///////////////////////////////////////////////////////////////////

    // the name of the js file
    var bookmarkletFilename = 'bookmarklet.js';
    // short description of the bookmarklet
    var bookmarkletDescription = 'bookmark thingy';
    // where on the web this will be deployed
    var deployRoot = "https://raw.github.com/lowellk/bookmarklet-template/master/";

    ///////////////////////////////////////////////////////////////////
    // Debug mode is for development only. Don't deploy it!
    ///////////////////////////////////////////////////////////////////

    var DEBUG = false;

    if (DEBUG) {
      console.error('NOTE!! You are in debug mode.');
    }

    function makeBookmarklet($bookmarkletAnchor) {
      var bookmarkletLocation = (location.protocol == 'file:') ? '' : deployRoot;

      var url = bookmarkletLocation + bookmarkletFilename;

      // get loadScript function and remove extra spaces
      var loadScriptSrc = $('.load-script-function').html().replace(/\s\s+/g, ' ');

      // warn users who try to click the bookmarklet unless in debug mode
      $bookmarkletAnchor.click(function () {
        if (DEBUG) {
          return;
        }
        alert('To install, drag bookmarklet to your bookmarks bar.');
        return false;
      });

      var template = 'javascript:({fn}("{url}?{rnd}"))();';
      $bookmarkletAnchor.attr('href', template
          .replace('{fn}', loadScriptSrc)
          .replace('{url}', url)
          .replace('{rnd}', Math.random())); // cache bust
    }

    $(function () {
      // adjust the page to reflect the description
      $('title, body > h1, .bookmarklet').html(bookmarkletDescription);

      // set the href of the anchor to the js to dynamically load the bookmarklet
      makeBookmarklet($('.bookmarklet'));
    });
  </script>
</head>
<body>
<h1></h1>

<h2>Instructions</h2>

<p>
  This bookmarklet is a tiny program that lives inside a browser bookmark.
  You can add it to your browser like you'd add any ordinary bookmark.
  And like a bookmark, click it to execute it.
</p>


<h2>The bookmarklet</h2>
Drag this to your bookmarks bar: <a class="bookmarklet">The Bookmarklet</a>
</body>
</html>